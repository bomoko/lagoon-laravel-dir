#
# This file is autogenerated by Laragoon
#

docker-compose-yaml: ./lagoon-docker-compose.yml

project: project-name-here


tasks:
  post-rollout:
    - run:
        name: Prepare Storage
        command: mkdir -p /app/storage/framework/sessions /app/storage/framework/views /app/storage/framework/cache /app/storage/framework/cache/data
        service: cli
    - run:
        name: env
        command: env | sort
        service: cli
    - run:
        name: Run migrations
        command: php artisan -n migrate --force
        service: cli
    - run:
        name: Clear Caches
        command: php artisan -n cache:clear && php artisan -n route:clear && php artisan -n view:cache
        service: cli

# environments:
#  master:
#    cronjobs:
#      - name: artisan schedule
#        schedule: "* * * * *"
#        command: cd /app && php artisan schedule:run
#        service: cli
